import"./vue.ff9d403d.js";import{E as L,a as Y,b as G,c as R,d as q,e as W,f as H,g as J,h as K,i as M,j as Q,k as X,l as T,m as Z,n as ee,o as le,p as oe,q as re,r as te,s as ne,t as _,u as ae,v as z}from"./element-plus.1b721c2c.js";import{G as N,d as V,h as ie,e as B,U as o,P as w,a6 as F,I as m,x as me,o as k,c as $,a as C}from"./@vue.2a4add27.js";const ue=(a,i,d,r)=>{if(!Array.isArray(a))return[];const s=[];let l=[];return r&&(l=Object.keys(r)),a.forEach(u=>{let c={label:typeof u=="string"?u:u[i],value:typeof u=="string"?u:u[d]};r&&l.forEach(f=>{c[f]=u[f]}),s.push(c)}),s},A=(a,i)=>a.filter(d=>d.formItem.prop===i)[0]||{type:"input",formItem:{prop:"",label:""}},de=(a,i,d)=>{var r;const s={input:"\u8F93\u5165","input-number":"\u8F93\u5165",select:"\u9009\u62E9","tree-select":"\u9009\u62E9",cascader:"\u9009\u62E9",radio:"\u9009\u62E9","radio-button":"\u9009\u62E9",checkbox:"\u9009\u62E9","checkbox-button":"\u9009\u62E9",datetime:"\u9009\u62E9",time:"\u9009\u62E9",switch:"\u9009\u62E9",upload:"\u4E0A\u4F20"},l=A(a.formOption,a.field);if(Array.isArray(i)&&i.length===0)return Promise.reject(`\u8BF7${s[l.type]||"\u5B8C\u5584"}${l.formItem.label}`);if(!i)return Promise.reject(`\u8BF7${s[l.type]||"\u5B8C\u5584"}${l.formItem.label}`);if(!((r=l==null?void 0:l.formItem)!=null&&r.rules))return Promise.resolve();if(typeof l.formItem.rules.validator=="function")l.formItem.rules.validator(a,i).then(()=>d()).catch(u=>{var f;var c;return d(new Error(u!=="err"?u:(f=(c=l==null?void 0:l.formItem.rules)==null?void 0:c.message)!=null?f:""))});else return l.formItem.rules.validator.test(i)?Promise.resolve():Promise.reject(l.formItem.rules.message)},pe=(a,i=[])=>{let d={};return a.forEach(r=>{var c;var s,l;const u=typeof r=="string"?r:r.formItem.prop;i.includes(u)||(d[u]=[{required:!0,validator:de,trigger:(c=(l=(s=r.formItem)==null?void 0:s.rules)==null?void 0:l.trigger)!=null?c:"blur",formOption:a}])}),d},se={checkIphoneNum:(a,i)=>i?/(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(i)?Promise.resolve():Promise.reject("\u624B\u673A\u683C\u5F0F\u6709\u8BEF"):Promise.reject("\u8BF7\u8F93\u5165\u624B\u673A\u53F7")},Be=Object.freeze(Object.defineProperty({__proto__:null,CommonValidator:se,getLabel:A,getOption:ue,getRules:pe},Symbol.toStringTag,{value:"Module"}));(function(){try{var a=document.createElement("style");a.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}")),document.head.appendChild(a)}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();const Ne=N({name:"TableGenerator",setup(a,{expose:i,attrs:d,slots:r,emit:s}){const l=d;let u,c=new Date().getTime(),f=V(!1),y=V(0);return ie(()=>{B(()=>l.loading,x=>{x?u=L.service({target:`.el-table-${c}`}):u==null||u.close()},{immediate:!0}),B(()=>l.data,x=>{if(!(r!=null&&r.operation)||x.length===0)return f.value=!0;f.value=!1,setTimeout(()=>{let h=0;document.querySelectorAll(".content-wrapper-width").forEach(I=>{I.offsetWidth>h&&(h=I.offsetWidth)}),y.value=h>0?h+32:"auto",console.log(y.value),f.value=!0})},{immediate:!0})}),()=>{function x(g){return g.map(e=>["selection","index","expand"].includes(e.type)?o(_,m({type:e.type},e),{...e==null?void 0:e.slot}):o(_,m({"show-overflow-tooltip":!0,align:"left"},e),{default:p=>{var b,E;var v;return e.children&&e.children.length>0?x(e.children):r[e.prop]?o(w,null,[(v=r[e.prop])==null?void 0:v.call(r,{$index:p.$index,row:p.row})]):e.formatter?o(w,null,[(b=e.formatter({$index:p.$index,row:p.row}))!=null?b:"-"]):o(w,null,[(E=p.row[e.prop])!=null?E:"-"])},...e==null?void 0:e.slot}))}function h(){return o(z,m({stripe:!0},l,{class:`TableGenerator el-table-${c}`}),{default:()=>[x(l.tableOption),r!=null&&r.operation?o(_,{fixed:"right",label:"\u64CD\u4F5C",width:y.value},{default:g=>{var e;return o("div",{class:"content-wrapper"},[(e=r.operation)==null?void 0:e.call(r,{$index:g.$index,row:g.row})])}}):""],empty:()=>r!=null&&r.empty?r==null?void 0:r.empty():o(ae,{description:"\u6682\u65E0\u6570\u636E"},null),append:()=>r!=null&&r.append?r==null?void 0:r.append():""})}function I(){return o(z,m(d,{class:`TableGenerator el-table-${c}`}),{default:()=>[o(_,{fixed:"right"},{default:g=>{var e;return o("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(e=r.operation)==null?void 0:e.call(r,{$index:g.$index,row:g.row})])}})]})}return o(w,null,[f.value?h():I()])}}});/*! Element Plus Icons Vue v2.0.10 */var O=(a,i)=>{let d=a.__vccOpts||a;for(let[r,s]of i)d[r]=s;return d},ce={name:"ArrowDown"},fe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ve=C("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),he=[ve];function be(a,i,d,r,s,l){return k(),$("svg",fe,he)}var ge=O(ce,[["render",be],["__file","arrow-down.vue"]]),we={name:"ArrowUp"},xe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ye=C("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Ie=[ye];function Ee(a,i,d,r,s,l){return k(),$("svg",xe,Ie)}var Ge=O(we,[["render",Ee],["__file","arrow-up.vue"]]),Fe={name:"Refresh"},_e={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ve=C("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),ke=[Ve];function $e(a,i,d,r,s,l){return k(),$("svg",_e,ke)}var Ce=O(Fe,[["render",$e],["__file","refresh.vue"]]),Oe={name:"Search"},Ue={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},je=C("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),De=[je];function Pe(a,i,d,r,s,l){return k(),$("svg",Ue,De)}var Se=O(Oe,[["render",Pe],["__file","search.vue"]]);function Ye(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!me(a)}const Ae=N({name:"FormGenerator",setup(a,{expose:i,attrs:d,slots:r,emit:s}){const l=d,u=V(),c=V(!1),f={labelWidth:l.labelWidth||"auto",column:isNaN(l.column)?4:l.column>=4?l.column:4},y={submit:()=>{u.value.validate(h=>{h&&s("submit")})},reset:()=>{u.value.resetFields(),s("submit","init")}};function x(h){c.value=h,l.formOption.forEach((I,g)=>{g>f.column-2&&(I.show=h)})}return l.formOption.length>=f.column-2&&(l==null?void 0:l.type)==="search"&&x(!1),i(()=>({...u.value,...y})),()=>{function h(){let e={...l};return delete e.model,delete e.formOption,l.formOption.forEach(p=>{var v,b,E;(v=p==null?void 0:p.formItem)!=null&&v.rules&&!((E=(b=p==null?void 0:p.formItem)==null?void 0:b.rules)!=null&&E.hasOwnProperty("trigger"))&&(p.formItem.rules.trigger="blur")}),o(R,m({class:`FormGenerator ${(l==null?void 0:l.type)==="search"?"FormGeneratorSearch":""} ${(l==null?void 0:l.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(l==null?void 0:l.type)==="search","validate-on-rule-change":!1},f,e,{ref:u}),{default:()=>[l.formOption.map(p=>{let v;if(!(p.hasOwnProperty("show")&&p.show===!1))return o(Y,p.formItem,Ye(v=I(p))?v:{default:()=>[v]})}),e.disabled===!0||e.noFooter||!e.onSubmit?"":o(Y,{class:`btnItem ${c.value?"searchItem":""}`},{default:()=>r!=null&&r.default?o(w,null,[r.default()[0].children]):(l==null?void 0:l.type)==="search"?g():o(w,null,[o(G,{onClick:p=>{function v(b){return b.parentElement.className!=="el-dialog"?v(b.parentElement):b.parentElement}v(p.target).querySelector(".el-dialog__headerbtn").click()}},{default:()=>[F("\u53D6\u6D88")]}),o(G,{type:"primary",onClick:y.submit},{default:()=>[F("\u786E\u5B9A")]})]),label:()=>""})]})}function I(e){var p,v,b,E,U,j,D,P;switch(e.type){case"input":return o(ne,m({clearable:!0,maxlength:30},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{...(p=e==null?void 0:e.control)==null?void 0:p.slot});case"input-number":return o(te,m({min:0,max:100},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),null);case"select":return o(re,m({clearable:!0},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{default:()=>{var t;return[(t=e==null?void 0:e.control)==null?void 0:t.option.map(n=>o(oe,m(n,{key:n.value}),{...n==null?void 0:n.slot}))]}});case"tree-select":return o(le,m({clearable:!0},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{...(v=e==null?void 0:e.control)==null?void 0:v.slot});case"cascader":return o(ee,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),null);case"radio":return o(T,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{default:()=>{var t;return[(t=e==null?void 0:e.control)==null?void 0:t.option.map(n=>o(Z,m(n,{label:n.value,key:n.label}),{default:()=>[n.label],...n==null?void 0:n.slot}))]}});case"radio-button":return o(T,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{default:()=>{var t;return[(t=e==null?void 0:e.control)==null?void 0:t.option.map(n=>o(X,m(n,{label:n.value,key:n.label}),{default:()=>[n.label],...n==null?void 0:n.slot}))]}});case"checkbox":return o(M,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{default:()=>{var t;return[(t=e==null?void 0:e.control)==null?void 0:t.option.map(n=>o(Q,m(n,{label:n.value,key:n.label}),{default:()=>[n.label],...n==null?void 0:n.slot}))]}});case"checkbox-button":return o(M,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{default:()=>{var t;return[(t=e==null?void 0:e.control)==null?void 0:t.option.map(n=>o(K,m(n,{label:n.value,key:n.label}),{default:()=>[n.label],...n==null?void 0:n.slot}))]}});case"datetime":const S={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((b=e==null?void 0:e.control)==null?void 0:b.type)||"date"];return o(J,m({clearable:!0,format:S,"value-format":S},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{...(E=e==null?void 0:e.control)==null?void 0:E.slot});case"time":return o(H,m({clearable:!0},e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{...(U=e==null?void 0:e.control)==null?void 0:U.slot});case"switch":return o(W,m(e==null?void 0:e.control,{modelValue:l.model[e.formItem.prop],"onUpdate:modelValue":t=>l.model[e.formItem.prop]=t}),{...(j=e==null?void 0:e.control)==null?void 0:j.slot});case"upload":return o(q,m(e==null?void 0:e.control,{"file-list":l.model[e.formItem.prop],"onUpdate:file-list":t=>l.model[e.formItem.prop]=t}),{default:()=>l.disabled?"":o(G,{type:"primary"},{default:()=>[F("\u4E0A\u4F20\u6587\u4EF6")]}),...(D=e==null?void 0:e.control)==null?void 0:D.slot});case"txt":return o(w,null,[l.model[e.formItem.prop]]);case"slot":return o(w,null,[(P=r[e.formItem.prop])==null?void 0:P.call(r,{form:l.model,data:l.model[e.formItem.prop]})])}}function g(){return o(w,null,[o(G,{type:"primary",onClick:y.submit,icon:Se},{default:()=>[F("\u641C\u7D22")]}),o(G,{onClick:y.reset,icon:Ce},{default:()=>[F("\u91CD\u7F6E")]}),l.type==="search"&&l.formOption.length>f.column-1?o(w,null,[o(G,{text:!0,type:"primary",onClick:()=>{x(!c.value)},icon:c.value?Ge:ge},{default:()=>[c.value?"\u6536\u8D77":"\u5C55\u5F00"]})]):""])}return h()}}});export{Ae as P,Be as p,Ne as z};
